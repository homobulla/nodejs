## 存储 node 中的数据

选择存储机制的因素：

-   存储什么数据
-   为了保证性能，要有多快的读取和写入性能
-   有多少数据
-   要怎么查询数据
-   数据要保存多久，对可靠性有什么要求

三种不同的存储机制：

-   存储数据而无需安装和配置 DBMS
-   用关系型数据库存储数据，即`MySQL`和`PostgreSQL`
-   用`NoSQL`数据库存储数据，具体说就是`Redis、MongoDB和Mongoose`。

### 无服务器的数据存储

内存存储的理想用途是存放少量经常使用的数据。且该数据不需要被留存。

### 基于文件的存储

即用文件存放数据，一般用来保存文件的配置信息。[demo](./5-1.js)

关系型数据库和非关系型数据库。

### 关系型数据库管理系统（RDBMS）

关系型数据库：指采用了关系模型来组织数据的数据库。
关系模型指的就是二维表格模型，而一个关系型数据库就是由二维表及其之间的联系所组成的一个数据组织。

关系型数据库的优点：

-   容易理解：二维表结构是非常贴近逻辑世界的一个概念，关系模型相对网状、层次等其他模型来说更容易理解
-   使用方便：通用的 SQL 语言使得操作关系型数据库非常方便
-   易于维护：丰富的完整性(实体完整性、参照完整性和用户定义的完整性)大大减低了数据冗余和数据不一致的概率

关系型数据库存在的问题

-   网站的用户并发性非常高，往往达到每秒上万次读写请求，对于传统关系型数据库来说，硬盘 I/O 是一个很大的瓶颈

-   网站每天产生的数据量是巨大的，对于关系型数据库来说，在一张包含海量数据的表中查询，效率是非常低的

-   在基于 web 的结构当中，数据库是最难进行横向扩展的，当一个应用系统的用户量和访问量与日俱增的时候，数据库却没有办法像 web server 和 app server 那样简单的通过添加更多的硬件和服务节点来扩展性能和负载能力。当需要对数据库系统进行升级和扩展时，往往需要停机维护和数据迁移。

-   性能欠佳：在关系型数据库中，导致性能欠佳的最主要原因是多表的关联查询，以及复杂的数据分析类型的复杂 SQL 报表查询。

为了保证数据库的 ACID 特性，必须尽量按照其要求的范式进行设计，关系型数据库中的表都是存储一个格式化的数据结构。

数据库事务必须具备 ACID 特性，ACID 分别是 Atomic 原子性，Consistency 一致性，Isolation 隔离性，Durability 持久性。

### NoSQL 数据库 即菲关系型数据库

#### redis

`Redis`是将数据存在`RAM`中，并且会在磁盘中记录数据的变化。由此带来的局限性是存储空间受到内存的影响，但数据操作很快性能很好。假如`redis`服务器崩溃了，RAM 中的内容丢了，可以用磁盘中的日志恢复数据。

### 引用

-[简述关系型数据库和非关系型数据库](https://www.jianshu.com/p/fd7b422d5f93)
