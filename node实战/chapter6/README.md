## Connect

-   搭建一个 Connect 程序
-   Connect 中间件的工作机制
-   为什么中间件的顺序很重要
-   挂载中间件和服务器
-   创建可配置的中间件
-   使用错误处理中间件

### Connect

`Connect`是一个框架，它使用模块化的组件以可重用的方式来实现`web`程序中的逻辑。这种模块化组件实质上是一个函数，函数的输入是 http 的请求和响应对象，执行逻辑后输出到下一个组件即函数中去。而函数与函数之间是用分派器来连接的。这种函数一般被称为中间件。

在 Connect 中，中间件是一个 JavaScript 函数，按惯例会接受三个参数：一个请求对象，一个响应对象，还有一个通常命名为 next 的参数，它是一个回调函数，表明这个组件已经完成了它的工作，可以执行下一个中间件组件了。

`Connect`模块默认输出一个函数，函数挂载有`use`方法，该方法的参数为中间件函数，且支持链式调用。与此同时**中间件的顺序很重要**。

#### 挂载中间件和服务器

`挂载`可以给中间件或整个程序定义一个路径前缀。大致是做一层路由的映射或代理筛选。
我的理解是`挂载`是对有选择的对某些路由使用中间件。

#### 创建可配置中间件

可配置的能力来自于闭包，中间件会遵循一个惯例：用函数（外部配置）来返回另一个函数（内在逻辑）。
